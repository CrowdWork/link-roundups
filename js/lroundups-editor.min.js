!function(){var a=jQuery,b="roundup",c=LR.Modal.extend({content:"",actions:{Save:"save",Close:"close"},render:function(){var b=_.template(a("#lroundups-post-tmpl").html());return this.content=b({title:this.title,posts:this.posts}),LR.Modal.prototype.render.apply(this,arguments)}});wp.mce.roundup={shortcode_data:{},template:_.template('<div class="lr-block"><% if (typeof name !== "undefined" ) { %><%= name %><% } else { %>Link Roundup Block<% } %></div>'),getContent:function(){var a=this.shortcode.attrs.named;return a.innercontent=this.shortcode.content,this.template(a)},edit:function(a,c){var d=wp.shortcode.next(b,a),e=d.shortcode.attrs.named;e.innercontent=d.shortcode.content,wp.mce.roundup.popupwindow(tinyMCE.activeEditor,e)},popupwindow:function(b,d){a.ajax({url:ajaxurl,dataType:"json",data:{action:"roundup_block_posts"},success:function(a){var b=new c;b.posts=new Backbone.Collection(a),b.title=d.name,b.render()}})}},wp.mce.views.register(b,wp.mce.roundup)}();